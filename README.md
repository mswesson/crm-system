# CRM-система для управления клиентами

## Описание

Данный проект представляет собой веб-приложение CRM-системы, предназначенной для управления клиентами и рекламными кампаниями. Пользователи смогут авторизовываться в системе и управлять услугами, потенциальными и активными клиентами, контрактами и рекламными кампаниями.

## Основные функции

- Авторизация пользователя
- Управление услугами:
  - Создание, редактирование и просмотр услуг.
- Управление рекламными кампаниями:
  - Создание, редактирование и просмотр рекламных кампаний.
- Управление потенциальными клиентами:
  - Создание, редактирование и просмотр потенциальных клиентов.
  - Перевод потенциальных клиентов в активные.
- Управление контрактами:
  - Создание, редактирование и просмотр контрактов.
- Статистика:
  - Подсчёт и отображение статистики по рекламным кампаниям.

## Страницы приложения

### Услуги

- Список активных услуг с возможностью создания, редактирования и удаления.
- Каждая услуга имеет детальную страницу.
- Имеет информацию о количестве подписанных контрактов

### Рекламные кампании

- Список рекламных компаний с возможностью создания, редактирования и удаления.
- Каждая рекламная компания имеет детальную страницу.
- Имеет статистику по окупаемости и прибыльности.

### Потенциальные клиенты

- Список потенциальных клиентов с возможностью перевода в активные, изменения и удаления.
- Каждый клиент имеет детальную страницу.
- Потенациальные клиенты добавляются с помощью REST API.

    Потенциальные клиенты могут быть добавлены в систему с помощью REST API. Для этого используется POST-запрос от сервиса, в котором находится информация о рекламной кампании. 

    #### Требования к запросу

    1. **API Token**: Для успешного создания потенциального клиента в заголовке (HEADER) запроса должен быть указан токен API (Token). Без этого токена создание клиента будет невозможно, и система вернёт сообщение об ошибке.

    2. **Формат запроса**: POST-запрос на адрес <http://yourhost/clients/potential/api/>должен содержать данные о потенциальном клиенте в формате JSON. Пример структуры данных:

        ```json
        {
        "first_name": "Eduard",
        "last_name": "Komarov",
        "middle_name": null,
        "phone_number": "+79913713124",
        "email": "rango.adik@gmail.com",
        "advertising_company": 2
        }
        ```

### Активные клиенты

- Список активных клиентов с возможностью редактирования и удаления.

### Контракты

- Список контрактов с возможностью создания, редактирования и удаления.
- Каждый контракт имеет детальную страницу.
- При подписании контракта генерируется договор в формате PDF и прекрепляется к контракту, при изменении условий контракта договор будет сгенерирован заного и прикреплен. 
- При изменнеии создании, изменении и удалении контракта будет внесена пометка в заметки клиента.
- Имеет информацию о количестве подписанных контрактов

## Роли пользователей

- **Администратор**: может управлять пользователями и их ролями через административную панель Django.
- **Оператор**: может управлять потенциальными клиентами.
- **Маркетолог**: может управлять услугами и рекламными кампаниями.
- **Менеджер**: может управлять контрактами и переводить потенциальных клиентов в активные.
- Все роли могут просматривать статистику рекламных кампаний.

## Установка и запуск

1. Клонируйте репозиторий:

   ```bash
   git clone https://github.com/mswesson/crm-system.git
   cd crm-system
   ```

2. Создайте и настройте *.env* по шаблону *.env.template*

    ```.env
    # Default settings
    SECRET_KEY= здесь ваш секретный ключ
    TOKENS_API= токен для добавления клиентов
    DEBUG= режим разработки
    ALLOWED_HOSTS= доступные адреса для входа

    # Company settings
    COMPANY_NAME= название компании

    # Database settings
    POSTGRES_DB= имя базы данных
    POSTGRES_USER= имя пользователя
    POSTGRES_PASSWORD= пароль базы данных
    ```

3. Установите docker и docker-compose

    Установить можно с оффициального сайта <https://docs.docker.com/engine/install/>

4. Соберите контейнеры

    ```bash
    docker compose build
    ```

5. Запустите сервер

    ```bash
    docker compose up -d
    ```

6. Создайте записи в бд (для теста)

    ```bash
    docker exec -it crm-system-app-1 python manage.py create_all_objects
    ```

7. Зайдите на сайт

    Откройте браузер и перейдите по адресу <http://127.0.0.1:8000/auth/login> для доступа к приложению.
